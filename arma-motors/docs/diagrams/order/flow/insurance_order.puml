@startuml

title
<u>Заявка на страхование (получение данных)</u>
end title

left header
Wezom
endheader

skinparam {
    TitleFontSize 25
    TitleFontName Courier
    TitleFontStyle underscore
    ArrowColor #033649
    ArrowFontColor #24292e
    BackgroundColor #f5f5f5
    BorderColor black
    RoundCorner 25
    SequenceLifeLineBorderColor #033649
    ParticipantFontSize 17
    BoxPadding 50
    SequenceBoxBorderColor '
}

skinparam note {
    BackgroundColor gold
    BorderColor gold
}

skinparam group {
    BackgroundColor red
    BorderColor black
}

skinparam participant {
    BorderColor black
    BackgroundColor tomato
}

box "App" #LightBlue
participant Mobile
participant Backend
end box

group получение сервисов

Mobile -> Backend: service(alias: "insurance") {childs}

rnote over Mobile
в childs сервисы по страхованию
endrnote
end

'ФРАНШИЗА
group страховые компании
Mobile -> Backend: service(alias: "insurance"){childs {insuranceFranchises}}

rnote over Mobile
insuranceFranchises есть только у сервисов
страхования (casco, go, dgo)
endrnote
end

'Способ связи
group  способ саязи
Mobile -> Backend: communications
end

== casco ==
'БРЕНДЫ
group бренд авто
Mobile -> Backend: brands
end

'МОДЕЛИ
group модели авто
Mobile -> Backend: models(brandId: ID)
end

'СТРАХОВАЯ КОМПАНИЯ
group страховые компании
Mobile -> Backend: service(alias: "casco"){insuranceCompany}

rnote over Mobile
insuranceCompany имеет данные
только у casco
endrnote

rnote over Mobile
получить можно у сущ. сервиса
без доп. запроса
endrnote
end

'КОЛ-ВО ПЛАТЕЖЕЙ
group кол-во платежей
Mobile -> Backend: service(alias: "casco"){countPayments}

rnote over Mobile
countPayments имеет данные
только у casco
endrnote
end

'ВОЗРАС ВОДИТЕЛЯ
group возраст водителя
Mobile -> Backend: driverAges
end

== go, dgo ==
'РЕГИОН
group регион
Mobile -> Backend: regions
end

'ГОРОД
group город
Mobile -> Backend: cities(regionId: ID)
end

'ЛЬГОТЫ
group льготы
Mobile -> Backend: privileges
end

'Тип транспортного средства
group тип транспортного средства
Mobile -> Backend: transportTypes
end

'СРОК ДОГОВОРА
group срок договора
Mobile -> Backend: durations(serviceId: ID)

rnote over Mobile
или
endrnote

Mobile -> Backend: service(alias: "insurance") {durations}
end

left footer
<#lightblue,#red>|= Projecy|= Version |= Creator |= Status|= Created_at |= Updated_at |
<#lightgreen>| arma-motors | 1.0 | Rodomanov R. | dev | 21.01.2022 | 21.01.2022 |
endfooter
@enduml
