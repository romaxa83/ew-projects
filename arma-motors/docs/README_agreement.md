<div id="agreement-top"></div>
## Доп. согласования (agreement)
<p align="left">(<a href="https://bitbucket.org/wezom/arma-motors/src/develop/#top">back to main</a>)</p>


## Описание
<div id="agreement-about"></div>

- согласования приходят, от системы АА
(на роут api/agreements, как принимает новые так и обновляет уже существующие)
все они получают статус "NEW"

- при принятии согласования пользователем (mutation - agreementAccept) происходит такой флоу:
    - согласованию переключается стату на "USED"
    - создается заявка с типом "agreement"
    - сервис для заявки устанавливается как "SERVICE_ALIAS"
    - дц, тип комуникации и время приходят от МП и сохраняются в заявке
    - заявки устанавливается uuid - это uuid самого согласования
    - запускается событие AcceptAgreementEvent:
          - делается запрос в АА для потверждения (на роут /arma_mdm/hs/maapi/order)
          - если ответ положительный согласованию устанавливается статус "VERIFY",
            а созданной, до этого заявки, устанавливается статус "CREATED", что делает ее
            принятой в АА (??? стоит обсудить , может переключать ее в статус "IN_PROCESS")
          - если ответ отрицательный, согласованию устанавливается статус "ERROR"
            (может быть сигналом для мобайл вывести ошибку, и предложить пользователю повторно сделать запрос)
    - в МП возвращается созданая заявка
    
- при отклонении согласования пользователем (mutation - agreementReject) оно удаляется:
