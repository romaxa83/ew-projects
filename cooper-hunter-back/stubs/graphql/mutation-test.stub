<?php

declare(strict_types=1);

namespace {{ namespace }};

use {{ mutationNamespace }};
use Core\Testing\GraphQL\QueryBuilder\GraphQLQuery;
use Illuminate\Foundation\Testing\DatabaseTransactions;
use Illuminate\Testing\TestResponse;
use Tests\TestCase;

class {{ class }} extends TestCase
{
    use DatabaseTransactions;

    public const MUTATION = {{ mutation }}::NAME;

    public function test_do_success(): void
    {

    }

    public function test_not_permitted_user_get_no_permission_error(): void
    {

    }

    public function test_guest_get_unauthorized_error(): void
    {

    }

    protected function mutation(array $args, array $select = []): TestResponse
    {
        $query = GraphQLQuery::mutation(self::MUTATION)
            ->args($args)
            ->select($select ?: ['id']);

        return $this->postGraphQL($query->make());
    }
}
